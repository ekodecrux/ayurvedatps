#!/bin/bash

echo "=================================================="
echo "üîç ANALYZING CLOUDFLARE DNS CONFIGURATION"
echo "=================================================="
echo ""

echo "Based on your screenshot, I can see:"
echo ""
echo "DNS Records visible:"
echo "  1. CAA records (3x) - DNS only ‚úÖ"
echo "  2. CNAME ‚Üí ayurveda-clinic.pages... - DNS only (with gray icon)"
echo "  3. CNAME www ‚Üí ayurveda-clinic.pages... - DNS only (with gray icon)"
echo "  4. NS record - DNS only ‚úÖ"
echo ""

echo "üéØ CRITICAL ISSUE IDENTIFIED:"
echo "   The CNAME records point to 'ayurveda-clinic.pages...' (Cloudflare Pages)"
echo "   This is NOT pointing to our VPS server at 88.222.244.84"
echo ""

echo "üìã WHAT YOU NEED TO DO:"
echo ""
echo "These CNAME records need to be changed to A records pointing to our server!"
echo ""

echo "Step 1: Delete the existing CNAME records"
echo "   ‚ùå CNAME: tpsdhanvantariayurveda.com ‚Üí ayurveda-clinic.pages..."
echo "   ‚ùå CNAME: www ‚Üí ayurveda-clinic.pages..."
echo ""

echo "Step 2: Create new A records instead"
echo "   ‚úÖ A: @ (root) ‚Üí 88.222.244.84 (DNS only - gray cloud)"
echo "   ‚úÖ A: www ‚Üí 88.222.244.84 (DNS only - gray cloud)"
echo ""

echo "=================================================="
echo "üìù DETAILED INSTRUCTIONS:"
echo "=================================================="
echo ""

echo "1. DELETE CNAME FOR ROOT DOMAIN (@):"
echo "   ‚Ä¢ Find the CNAME record: tpsdhanvantariayurveda.com ‚Üí ayurveda-clinic.pages..."
echo "   ‚Ä¢ Click 'Edit' button (on the right)"
echo "   ‚Ä¢ Scroll down and click 'Delete' button"
echo "   ‚Ä¢ Confirm deletion"
echo ""

echo "2. DELETE CNAME FOR WWW:"
echo "   ‚Ä¢ Find the CNAME record: www ‚Üí ayurveda-clinic.pages..."
echo "   ‚Ä¢ Click 'Edit' button (on the right)"
echo "   ‚Ä¢ Scroll down and click 'Delete' button"
echo "   ‚Ä¢ Confirm deletion"
echo ""

echo "3. ADD NEW A RECORD FOR ROOT DOMAIN:"
echo "   ‚Ä¢ Click 'Add record' button"
echo "   ‚Ä¢ Type: Select 'A'"
echo "   ‚Ä¢ Name: Type '@' (or leave blank for root)"
echo "   ‚Ä¢ IPv4 address: Type '88.222.244.84'"
echo "   ‚Ä¢ Proxy status: Make sure it's GRAY cloud (DNS only)"
echo "   ‚Ä¢ TTL: Select 'Auto'"
echo "   ‚Ä¢ Click 'Save'"
echo ""

echo "4. ADD NEW A RECORD FOR WWW:"
echo "   ‚Ä¢ Click 'Add record' button"
echo "   ‚Ä¢ Type: Select 'A'"
echo "   ‚Ä¢ Name: Type 'www'"
echo "   ‚Ä¢ IPv4 address: Type '88.222.244.84'"
echo "   ‚Ä¢ Proxy status: Make sure it's GRAY cloud (DNS only)"
echo "   ‚Ä¢ TTL: Select 'Auto'"
echo "   ‚Ä¢ Click 'Save'"
echo ""

echo "5. PURGE CACHE (if you haven't already):"
echo "   ‚Ä¢ Left sidebar: Click 'Caching'"
echo "   ‚Ä¢ Click 'Configuration'"
echo "   ‚Ä¢ Find 'Purge Cache' section"
echo "   ‚Ä¢ Click 'Purge Everything'"
echo "   ‚Ä¢ Confirm"
echo ""

echo "6. WAIT AND TEST:"
echo "   ‚Ä¢ Wait 5-10 minutes for DNS propagation"
echo "   ‚Ä¢ Test: https://tpsdhanvantariayurveda.com/"
echo "   ‚Ä¢ Press Ctrl+Shift+R to hard refresh"
echo ""

echo "=================================================="
echo "üìä EXPECTED RESULT:"
echo "=================================================="
echo ""
echo "After completing these steps, your DNS should show:"
echo ""
echo "Type    Name    Content          Proxy Status    TTL"
echo "A       @       88.222.244.84    DNS only ‚ö™     Auto"
echo "A       www     88.222.244.84    DNS only ‚ö™     Auto"
echo ""
echo "=================================================="
echo ""

echo "üîÑ Once you complete this, run this command to verify:"
echo "   ./verify_com_domain.sh"
echo ""

